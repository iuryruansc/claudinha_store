<div class="col-md-6 col-lg-4">
    <div class="card shadow-sm h-100 promo-card">
        <div class="card-body">
            <% const produto=promo.lote.produto; const lote=promo.lote; const
                precoOriginal=parseFloat(produto.preco_compra); let precoPromocional=precoOriginal;
                if(promo.tipo==='porcentagem' ) { precoPromocional *=(1 - parseFloat(promo.valor) / 100); } else {
                precoPromocional -=parseFloat(promo.valor); } %>
                <h5 class="card-title">
                    <%= produto.nome %>
                </h5>
                <p class="card-text text-muted mb-2">
                    Lote: <%= lote.numero_lote %> | Val: <%= formatDate(lote.data_validade) %>
                </p>
                <p class="card-text">
                    <span class="text-muted text-decoration-line-through me-2">
                        <%= precoOriginal.toLocaleString('pt-BR', {style:'currency', currency:'BRL'}) %>
                    </span>
                    <strong class="text-success fs-5">
                        <%= precoPromocional.toLocaleString('pt-BR', {style:'currency', currency:'BRL'}) %>
                    </strong>
                </p>
        </div>
        <div class="card-footer">
            <div class="progress mb-1" style="height: 10px;">
                <div class="progress-bar promo-bar" role="progressbar" data-inicio="<%= promo.data_inicio %>"
                    data-fim="<%= promo.data_fim %>"></div>
            </div>
            <div class="promo-remaining text-end small text-muted"></div>
        </div>
        <div class="card-footer d-flex justify-content-end">
            <button class="btn btn-sm btn-outline-primary edit-promo-btn" data-bs-toggle="modal"
                data-bs-target="#promoModal" data-promo-id="<%= promo.id_desconto %>">
                <i class="bi bi-pencil-fill me-1"></i> Editar
            </button>
        </div>
    </div>
</div>